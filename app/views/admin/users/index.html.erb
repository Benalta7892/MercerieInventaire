<div class="row g-2 align-items-center mb-3">
  <div class="col-12 col-sm">
    <h1 class="mb-0">Users</h1>
  </div>
</div>

<% if @users.empty? %>
  <p class="text-muted">Aucun utilisateur.</p>
<% else %>

  <!-- MOBILE (< sm) : CARTES -->
  <div class="d-block d-sm-none">
    <% @users.each do |u| %>
      <div class="card shadow-sm mb-3">
        <div class="card-body">
          <div class="fw-semibold mb-1"><%= u.name.presence || "—" %></div>

          <div class="mb-2">
            <%= link_to u.email, admin_user_path(u), class: "text-decoration-none fw-semibold" %>
          </div>

          <div class="text-muted small mb-2">
            <strong>Admin :</strong> <%= u.admin? ? "Oui" : "Non" %>
            <span class="mx-2">•</span>
            <strong>Bloqué :</strong> <%= u.blocked? ? "Oui" : "Non" %>
          </div>

          <div class="text-muted small mb-3">
            <strong>Créé :</strong> <%= l(u.created_at.to_date) %>
          </div>

          <div class="d-grid">
            <%= link_to "Voir", admin_user_path(u), class: "btn btn-sm btn-outline-secondary w-100" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- DESKTOP (>= sm) : TABLE -->
  <div class="table-responsive d-none d-sm-block">
    <table class="table align-middle">
      <thead>
        <tr>
          <th>Nom</th>
          <th>Email</th>
          <th>Admin</th>
          <th>Bloqué</th>
          <th>Créé</th>
          <th></th>
        </tr>
      </thead>

      <tbody>
        <% @users.each do |u| %>
          <tr>
            <td class="fw-semibold"><%= u.name.presence || "—" %></td>

            <td>
              <%= link_to u.email, admin_user_path(u), class: "text-decoration-none fw-semibold" %>
            </td>

            <td class="text-muted"><%= u.admin? ? "Oui" : "Non" %></td>
            <td class="text-muted"><%= u.blocked? ? "Oui" : "Non" %></td>
            <td class="text-muted"><%= l(u.created_at.to_date) %></td>

            <td class="text-end">
              <%= link_to "Voir", admin_user_path(u), class: "btn btn-sm btn-outline-secondary" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

<% end %>
