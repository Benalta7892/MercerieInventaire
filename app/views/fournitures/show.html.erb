<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="mb-0"><%= @fourniture.name %></h1>

  <p class="text-muted">
    debug: user=<%= current_user.id %> fourniture=<%= @fourniture.id %> price_cents=<%= @fourniture.price_cents.inspect %>
  </p>


  <%# back = params[:return_to].presence || safe_back_url(fallback: fournitures_path) %>
  <%# back = params[:return_to].presence || fournitures_path(origin: params[:origin]) %>
  <% back = params[:return_to].presence || dashboard_path %>


  <%= link_to "← Retour", back, class: "btn btn-outline-secondary btn-sm" %>

</div>

<div class="card shadow-sm">
  <div class="card-body">
    <p><strong>Catégorie :</strong> <%= @fourniture.category&.name || "—" %></p>
    <p><strong>Stock :</strong> <%= @fourniture.quantity %> <%= @fourniture.unit %></p>
    <p><strong>Couleur :</strong> <%= @fourniture.color.presence || "—" %></p>
    <p><strong>Prix unitaire :</strong>
      <% if @fourniture.price_cents.present? %>
        <%= number_to_currency(@fourniture.price_cents.to_f / 100, unit: "€") %>
      <% else %>
        —
      <% end %>
    </p>
    <p><strong>Description :</strong> <%= @fourniture.description.presence || "—" %></p>
  </div>
</div>

<div class="mt-3">
  <div class="d-grid gap-2 d-sm-flex">
    <div class="w-100 d-grid">
      <%= button_to "Ajouter à la liste d’achat",
        liste_achat_items_path(fourniture_id: @fourniture.id),
        method: :post,
        form_class: "w-100",
        class: "btn btn-outline-success btn-sm w-100" %>
    </div>

    <%= link_to "Modifier",
          edit_fourniture_path(@fourniture, return_to: params[:return_to], cancel_to: "show"),
          class: "btn btn-outline-secondary btn-sm" %>

    <%= link_to "Supprimer",
          fourniture_path(@fourniture),
          class: "btn btn-outline-danger btn-sm",
          data: { turbo_method: :delete, turbo_confirm: "Supprimer cette fourniture ?" } %>
  </div>
</div>
